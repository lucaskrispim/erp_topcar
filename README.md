#!/bin/bash

echo "# üöó TopCar ERP - Manual de Opera√ß√£o e Fluxos de Neg√≥cio"
echo ""
echo "---"
echo "## üíª VIS√ÉO GERAL DO SISTEMA"
echo ""
echo "O TopCar ERP √© uma solu√ß√£o de gest√£o completa, projetada com foco em **integridade financeira** e **rastreabilidade de custos por ve√≠culo (ROI)**, utilizando Python/Django e a reatividade do HTMX."
echo ""
echo "O sistema garante que cada a√ß√£o (compra, manuten√ß√£o, venda) seja uma transa√ß√£o at√¥mica, evitando inconsist√™ncias cont√°beis. Foi validado com cen√°rios de troca, troco (saldo negativo) e lan√ßamentos de despesas gerais."
echo ""
echo "### Acesso e Status"
echo "* **URL:** http://localhost:8000/"
echo "* **Usu√°rio de Teste:** admin_teste / Senha: 123"
echo "* **Status de Valida√ß√£o:** Todos os fluxos cr√≠ticos de Compra, Venda, Custo e Liquida√ß√£o foram validados com sucesso (Passos 1 a 7)."
echo ""
echo "---"
echo "## ‚öôÔ∏è FLUXOS DE NEG√ìCIO ESSENCIAIS"
echo ""
echo "O sistema opera atrav√©s de ciclos bem definidos. O m√≥dulo financeiro √© o cora√ß√£o de cada ciclo:"
echo ""
echo "### 1. FLUXO DE AQUISI√á√ÉO E PREPARA√á√ÉO (Custo Real)"
echo ""
echo "Este fluxo insere o carro no estoque e atribui a ele o custo real:"
echo ""
echo "* **A√ß√£o A:** Menu **Ve√≠culos** ‚ûï **Nova Aquisi√ß√£o**."
echo "  * **Resultado:** Cria o ve√≠culo no Estoque (Status: MAINTENANCE) e gera uma **Conta a Pagar (Ledger)** para o Fornecedor."
echo "* **A√ß√£o B:** Menu **Oficina üîß** (Nova OS)."
echo "  * **Resultado:** Cria uma Ordem de Servi√ßo, que, ao ser conclu√≠da, gera uma **Conta a Pagar** separada para o Mec√¢nico (custo atrelado ao Ve√≠culo para o c√°lculo do ROI)."
echo ""
echo "### 2. FLUXO DE VENDA E LIQUIDA√á√ÉO"
echo ""
echo "* **A√ß√£o A:** Menu **Vendas** ‚ûï **Nova Venda**."
echo "  * **Capacidade:** Permite venda simples ou **Venda com Troca**, calculando o saldo (positivo ou negativo) na hora."
echo "  * **Resultado:** Baixa o Ve√≠culo do Estoque (Status: SOLD) e gera uma **Conta a Receber (ou Pagar)** pelo saldo da negocia√ß√£o."
echo "* **A√ß√£o B:** Menu **Financeiro** (Contas a Pagar/Receber)."
echo "  * **Resultado:** Permite **Quitar** (Baixar) a Conta. Ao quitar, o saldo do Banco/Caixa √© atualizado e o item sai da lista de abertos."
echo ""
echo "### 3. FLUXO DE AUDITORIA E CORRE√á√ÉO"
echo ""
echo "* **Cancelamento:** Na tela Detalhes da Venda, o bot√£o **Cancelar / Estornar Venda** reverte a transa√ß√£o atomicamente, devolvendo o carro vendido para o status **AVAILABLE** e deletando o carro da troca (garantindo que o hist√≥rico financeiro seja marcado como **CANCELED**)."
echo ""
echo "---"
echo "## üìä RELAT√ìRIOS E AUDITORIA"
echo ""
echo "O sistema oferece as seguintes ferramentas de intelig√™ncia gerencial:"
echo ""
echo "### 1. Relat√≥rio de Lucro (ROI)"
echo "* **Acesso:** Menu **Ve√≠culos üöó** üìà Relat√≥rio de Lucro (ROI)."
echo "* **Fun√ß√£o:** Cruza todos os lan√ßamentos atrelados a um ve√≠culo (Aquisi√ß√£o, Manuten√ß√£o, Venda) e exibe o **Lucro L√≠quido Real** do chassi. (Exclui gastos com comiss√£o e despesas gerais do c√°lculo do custo do ve√≠culo)."
echo ""
echo "### 2. Extrato Financeiro"
echo "* **Acesso:** Menu **Financeiro üí∏** üìú Extrato de Contas."
echo "* **Fun√ß√£o:** Mostra todas as movimenta√ß√µes (Entradas/Sa√≠das) liquidadas em um per√≠odo, permitindo o rastreio do saldo real do Caixa/Banco."
echo ""
echo "### 3. Lan√ßamentos Manuais (Flexibilidade Total)"
echo "* **Acesso:** Menu **Financeiro üí∏** ‚Üí Contas a Pagar/Receber ‚Üí **+ Novo Lan√ßamento Manual**."
echo "* **Fun√ß√£o:** Permite registrar despesas avulsas (Ex: Conta de Luz) ou B√¥nus/Comiss√µes vari√°veis sem atrelar a um carro, usando categorias (Plano de Contas)."
echo ""
echo "---"
echo "## üõ†Ô∏è ESTRUTURA DE NAVEGA√á√ÉO (Menu Principal)"
echo ""
echo "A navega√ß√£o est√° dividida em 5 m√≥dulos principais, sendo que os links de Cadastros e Ve√≠culos s√£o Dropdowns:"
echo ""
echo "| M√ìDULO | URL | A√á√ïES PRINCIPAIS |"
echo "| :--- | :--- | :--- |"
echo "| **Dashboard** | / | Vis√£o Geral, KPIs e Atividade Recente. |"
echo "| **Cadastros** | Dropdown | Gest√£o de Pessoas (Clientes, Colaboradores) e Dom√≠nio (Marcas, Modelos). |"
echo "| **Ve√≠culos** | Dropdown | **Estoque**, **Nova Aquisi√ß√£o**, **Relat√≥rio ROI** (Lucro). |"
echo "| **Vendas** | Dropdown | **Nova Venda** (com Troca) e **Hist√≥rico** (com Estorno). |"
echo "| **Financeiro** | Dropdown | **Contas a Pagar/Receber**, **Extrato**, **Plano de Contas** (Config). |"
echo "| **Oficina** | /maintenance/ | Gest√£o de Ordens de Servi√ßo (OS) e Custos de Prepara√ß√£o. |"
echo ""
echo "--------------------------------------------------------"